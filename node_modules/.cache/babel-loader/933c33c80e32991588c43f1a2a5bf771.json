{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SessionPatch = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar activeRecord_1 = require(\"../activeRecord\");\n\nvar SessionPatch =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SessionPatch, _super);\n\n  function SessionPatch(tracker) {\n    var _this = _super.call(this) || this;\n\n    _this.tracker = tracker;\n    return _this;\n  }\n\n  SessionPatch.prototype.save = function () {\n    if (!this.isDirty()) {\n      // Empty patch\n      return Promise.resolve({\n        type: 'sessionAttributesChanged',\n        patch: {\n          operations: []\n        }\n      });\n    }\n\n    var promise = this.tracker.track({\n      type: 'sessionAttributesChanged',\n      patch: this.buildPatch()\n    });\n    this.reset();\n    return promise;\n  };\n\n  return SessionPatch;\n}(activeRecord_1.ActiveRecord);\n\nexports.SessionPatch = SessionPatch;","map":{"version":3,"names":["Object","defineProperty","exports","value","SessionPatch","tslib_1","require","activeRecord_1","_super","__extends","tracker","_this","call","prototype","save","isDirty","Promise","resolve","type","patch","operations","promise","track","buildPatch","reset","ActiveRecord"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/facade/sessionPatch.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionPatch = void 0;\nvar tslib_1 = require(\"tslib\");\nvar activeRecord_1 = require(\"../activeRecord\");\nvar SessionPatch = /** @class */ (function (_super) {\n    tslib_1.__extends(SessionPatch, _super);\n    function SessionPatch(tracker) {\n        var _this = _super.call(this) || this;\n        _this.tracker = tracker;\n        return _this;\n    }\n    SessionPatch.prototype.save = function () {\n        if (!this.isDirty()) {\n            // Empty patch\n            return Promise.resolve({\n                type: 'sessionAttributesChanged',\n                patch: { operations: [] },\n            });\n        }\n        var promise = this.tracker.track({\n            type: 'sessionAttributesChanged',\n            patch: this.buildPatch(),\n        });\n        this.reset();\n        return promise;\n    };\n    return SessionPatch;\n}(activeRecord_1.ActiveRecord));\nexports.SessionPatch = SessionPatch;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,YAAR,GAAuB,KAAK,CAA5B;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,cAAc,GAAGD,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIF,YAAY;AAAG;AAAe,UAAUI,MAAV,EAAkB;EAChDH,OAAO,CAACI,SAAR,CAAkBL,YAAlB,EAAgCI,MAAhC;;EACA,SAASJ,YAAT,CAAsBM,OAAtB,EAA+B;IAC3B,IAAIC,KAAK,GAAGH,MAAM,CAACI,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;IACAD,KAAK,CAACD,OAAN,GAAgBA,OAAhB;IACA,OAAOC,KAAP;EACH;;EACDP,YAAY,CAACS,SAAb,CAAuBC,IAAvB,GAA8B,YAAY;IACtC,IAAI,CAAC,KAAKC,OAAL,EAAL,EAAqB;MACjB;MACA,OAAOC,OAAO,CAACC,OAAR,CAAgB;QACnBC,IAAI,EAAE,0BADa;QAEnBC,KAAK,EAAE;UAAEC,UAAU,EAAE;QAAd;MAFY,CAAhB,CAAP;IAIH;;IACD,IAAIC,OAAO,GAAG,KAAKX,OAAL,CAAaY,KAAb,CAAmB;MAC7BJ,IAAI,EAAE,0BADuB;MAE7BC,KAAK,EAAE,KAAKI,UAAL;IAFsB,CAAnB,CAAd;IAIA,KAAKC,KAAL;IACA,OAAOH,OAAP;EACH,CAdD;;EAeA,OAAOjB,YAAP;AACH,CAvBiC,CAuBhCG,cAAc,CAACkB,YAvBiB,CAAlC;;AAwBAvB,OAAO,CAACE,YAAR,GAAuBA,YAAvB"},"metadata":{},"sourceType":"script"}