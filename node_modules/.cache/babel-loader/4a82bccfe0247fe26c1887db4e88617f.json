{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NamespacedStorage = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar NamespacedStorage =\n/** @class */\nfunction () {\n  function NamespacedStorage(storage, namespace) {\n    if (namespace === '') {\n      throw new Error('The namespace cannot be empty.');\n    }\n\n    this.storage = storage;\n    this.namespace = namespace;\n  }\n\n  Object.defineProperty(NamespacedStorage.prototype, \"length\", {\n    get: function () {\n      return this.getKeys().length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  NamespacedStorage.prototype.clear = function () {\n    var e_1, _a;\n\n    try {\n      for (var _b = tslib_1.__values(this.getKeys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var key = _c.value;\n        this.storage.removeItem(key);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  NamespacedStorage.prototype.getItem = function (key) {\n    return this.storage.getItem(this.getPrefixedKey(key));\n  };\n\n  NamespacedStorage.prototype.key = function (index) {\n    var keys = this.getKeys();\n\n    if (index >= keys.length) {\n      return null;\n    }\n\n    return keys[index].substring(this.namespace.length + 1);\n  };\n\n  NamespacedStorage.prototype.removeItem = function (key) {\n    this.storage.removeItem(this.getPrefixedKey(key));\n  };\n\n  NamespacedStorage.prototype.setItem = function (key, value) {\n    this.storage.setItem(this.getPrefixedKey(key), value);\n  };\n\n  NamespacedStorage.prototype.getKeys = function () {\n    var keys = [];\n    var prefix = this.getPrefix();\n\n    for (var index = 0; index < this.storage.length; index++) {\n      var key = this.storage.key(index);\n\n      if (key !== null && key.indexOf(prefix) === 0) {\n        keys.push(key);\n      }\n    }\n\n    return keys;\n  };\n\n  NamespacedStorage.prototype.getPrefixedKey = function (key) {\n    return this.getPrefix() + key;\n  };\n\n  NamespacedStorage.prototype.getPrefix = function () {\n    return \"\".concat(this.namespace, \".\");\n  };\n\n  return NamespacedStorage;\n}();\n\nexports.NamespacedStorage = NamespacedStorage;","map":{"version":3,"names":["Object","defineProperty","exports","value","NamespacedStorage","tslib_1","require","storage","namespace","Error","prototype","get","getKeys","length","enumerable","configurable","clear","e_1","_a","_b","__values","_c","next","done","key","removeItem","e_1_1","error","return","call","getItem","getPrefixedKey","index","keys","substring","setItem","prefix","getPrefix","indexOf","push","concat"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/namespacedStorage.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NamespacedStorage = void 0;\nvar tslib_1 = require(\"tslib\");\nvar NamespacedStorage = /** @class */ (function () {\n    function NamespacedStorage(storage, namespace) {\n        if (namespace === '') {\n            throw new Error('The namespace cannot be empty.');\n        }\n        this.storage = storage;\n        this.namespace = namespace;\n    }\n    Object.defineProperty(NamespacedStorage.prototype, \"length\", {\n        get: function () {\n            return this.getKeys().length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NamespacedStorage.prototype.clear = function () {\n        var e_1, _a;\n        try {\n            for (var _b = tslib_1.__values(this.getKeys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var key = _c.value;\n                this.storage.removeItem(key);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    NamespacedStorage.prototype.getItem = function (key) {\n        return this.storage.getItem(this.getPrefixedKey(key));\n    };\n    NamespacedStorage.prototype.key = function (index) {\n        var keys = this.getKeys();\n        if (index >= keys.length) {\n            return null;\n        }\n        return keys[index].substring(this.namespace.length + 1);\n    };\n    NamespacedStorage.prototype.removeItem = function (key) {\n        this.storage.removeItem(this.getPrefixedKey(key));\n    };\n    NamespacedStorage.prototype.setItem = function (key, value) {\n        this.storage.setItem(this.getPrefixedKey(key), value);\n    };\n    NamespacedStorage.prototype.getKeys = function () {\n        var keys = [];\n        var prefix = this.getPrefix();\n        for (var index = 0; index < this.storage.length; index++) {\n            var key = this.storage.key(index);\n            if (key !== null && key.indexOf(prefix) === 0) {\n                keys.push(key);\n            }\n        }\n        return keys;\n    };\n    NamespacedStorage.prototype.getPrefixedKey = function (key) {\n        return this.getPrefix() + key;\n    };\n    NamespacedStorage.prototype.getPrefix = function () {\n        return \"\".concat(this.namespace, \".\");\n    };\n    return NamespacedStorage;\n}());\nexports.NamespacedStorage = NamespacedStorage;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}