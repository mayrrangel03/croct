{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnionType = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar schema_1 = require(\"./schema\");\n\nvar violation_1 = require(\"./violation\");\n\nvar UnionType =\n/** @class */\nfunction () {\n  function UnionType(first, second) {\n    var others = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      others[_i - 2] = arguments[_i];\n    }\n\n    this.schemas = tslib_1.__spreadArray([first, second], tslib_1.__read(others), false);\n  }\n\n  UnionType.prototype.getTypes = function () {\n    var e_1, _a, e_2, _b;\n\n    var types = [];\n\n    try {\n      for (var _c = tslib_1.__values(this.schemas), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var schema = _d.value;\n\n        try {\n          for (var _e = (e_2 = void 0, tslib_1.__values(schema.getTypes())), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var type = _f.value;\n\n            if (types.indexOf(type) < 0) {\n              types.push(type);\n            }\n          }\n        } catch (e_2_1) {\n          e_2 = {\n            error: e_2_1\n          };\n        } finally {\n          try {\n            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    return types;\n  };\n\n  UnionType.prototype.isValidType = function (value) {\n    var e_3, _a;\n\n    try {\n      for (var _b = tslib_1.__values(this.schemas), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var schema = _c.value;\n\n        if (schema.isValidType(value)) {\n          return true;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return false;\n  };\n\n  UnionType.prototype.validate = function (value, path) {\n    var e_4, _a;\n\n    if (path === void 0) {\n      path = [];\n    }\n\n    try {\n      for (var _b = tslib_1.__values(this.schemas), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var schema = _c.value;\n\n        if (schema.isValidType(value)) {\n          schema.validate(value, path);\n          return;\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    var types = this.getTypes();\n    throw new schema_1.Violation(\"Expected value of type \".concat(types.slice(0, -1).join(', '), \" or \").concat(types[types.length - 1], \" \") + \"at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat((0, violation_1.describe)(value), \".\"), path, {\n      type: types.join('|')\n    });\n  };\n\n  return UnionType;\n}();\n\nexports.UnionType = UnionType;","map":{"version":3,"names":["Object","defineProperty","exports","value","UnionType","tslib_1","require","schema_1","violation_1","first","second","others","_i","arguments","length","schemas","__spreadArray","__read","prototype","getTypes","e_1","_a","e_2","_b","types","_c","__values","_d","next","done","schema","_e","_f","type","indexOf","push","e_2_1","error","return","call","e_1_1","isValidType","e_3","e_3_1","validate","path","e_4","e_4_1","Violation","concat","slice","join","formatPath","describe"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/validation/unionType.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnionType = void 0;\nvar tslib_1 = require(\"tslib\");\nvar schema_1 = require(\"./schema\");\nvar violation_1 = require(\"./violation\");\nvar UnionType = /** @class */ (function () {\n    function UnionType(first, second) {\n        var others = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            others[_i - 2] = arguments[_i];\n        }\n        this.schemas = tslib_1.__spreadArray([first, second], tslib_1.__read(others), false);\n    }\n    UnionType.prototype.getTypes = function () {\n        var e_1, _a, e_2, _b;\n        var types = [];\n        try {\n            for (var _c = tslib_1.__values(this.schemas), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var schema = _d.value;\n                try {\n                    for (var _e = (e_2 = void 0, tslib_1.__values(schema.getTypes())), _f = _e.next(); !_f.done; _f = _e.next()) {\n                        var type = _f.value;\n                        if (types.indexOf(type) < 0) {\n                            types.push(type);\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return types;\n    };\n    UnionType.prototype.isValidType = function (value) {\n        var e_3, _a;\n        try {\n            for (var _b = tslib_1.__values(this.schemas), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var schema = _c.value;\n                if (schema.isValidType(value)) {\n                    return true;\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return false;\n    };\n    UnionType.prototype.validate = function (value, path) {\n        var e_4, _a;\n        if (path === void 0) { path = []; }\n        try {\n            for (var _b = tslib_1.__values(this.schemas), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var schema = _c.value;\n                if (schema.isValidType(value)) {\n                    schema.validate(value, path);\n                    return;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        var types = this.getTypes();\n        throw new schema_1.Violation(\"Expected value of type \".concat(types.slice(0, -1).join(', '), \" or \").concat(types[types.length - 1], \" \")\n            + \"at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat((0, violation_1.describe)(value), \".\"), path, { type: types.join('|') });\n    };\n    return UnionType;\n}());\nexports.UnionType = UnionType;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}