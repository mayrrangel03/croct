{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CachedAssigner = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar logging_1 = require(\"../logging\");\n\nvar CachedAssigner =\n/** @class */\nfunction () {\n  function CachedAssigner(assigner, cache, logger) {\n    this.assigner = assigner;\n    this.cache = cache;\n    this.logger = logger !== null && logger !== void 0 ? logger : new logging_1.NullLogger();\n  }\n\n  CachedAssigner.prototype.assignCid = function () {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var cid, newCid;\n      return tslib_1.__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            cid = this.cache.get();\n\n            if (cid !== null) {\n              this.logger.debug('Previous CID loaded from cache');\n              return [2\n              /*return*/\n              , cid];\n            }\n\n            return [4\n            /*yield*/\n            , this.assigner.assignCid()];\n\n          case 1:\n            newCid = _a.sent();\n            this.cache.put(newCid);\n            this.logger.debug('New CID stored into cache');\n            return [2\n            /*return*/\n            , newCid];\n        }\n      });\n    });\n  };\n\n  return CachedAssigner;\n}();\n\nexports.CachedAssigner = CachedAssigner;","map":{"version":3,"names":["Object","defineProperty","exports","value","CachedAssigner","tslib_1","require","logging_1","assigner","cache","logger","NullLogger","prototype","assignCid","__awaiter","cid","newCid","__generator","_a","label","get","debug","sent","put"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/cid/cachedAssigner.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CachedAssigner = void 0;\nvar tslib_1 = require(\"tslib\");\nvar logging_1 = require(\"../logging\");\nvar CachedAssigner = /** @class */ (function () {\n    function CachedAssigner(assigner, cache, logger) {\n        this.assigner = assigner;\n        this.cache = cache;\n        this.logger = logger !== null && logger !== void 0 ? logger : new logging_1.NullLogger();\n    }\n    CachedAssigner.prototype.assignCid = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var cid, newCid;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        cid = this.cache.get();\n                        if (cid !== null) {\n                            this.logger.debug('Previous CID loaded from cache');\n                            return [2 /*return*/, cid];\n                        }\n                        return [4 /*yield*/, this.assigner.assignCid()];\n                    case 1:\n                        newCid = _a.sent();\n                        this.cache.put(newCid);\n                        this.logger.debug('New CID stored into cache');\n                        return [2 /*return*/, newCid];\n                }\n            });\n        });\n    };\n    return CachedAssigner;\n}());\nexports.CachedAssigner = CachedAssigner;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyB,KAAK,CAA9B;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIF,cAAc;AAAG;AAAe,YAAY;EAC5C,SAASA,cAAT,CAAwBI,QAAxB,EAAkCC,KAAlC,EAAyCC,MAAzC,EAAiD;IAC7C,KAAKF,QAAL,GAAgBA,QAAhB;IACA,KAAKC,KAAL,GAAaA,KAAb;IACA,KAAKC,MAAL,GAAcA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuCA,MAAvC,GAAgD,IAAIH,SAAS,CAACI,UAAd,EAA9D;EACH;;EACDP,cAAc,CAACQ,SAAf,CAAyBC,SAAzB,GAAqC,YAAY;IAC7C,OAAOR,OAAO,CAACS,SAAR,CAAkB,IAAlB,EAAwB,KAAK,CAA7B,EAAgC,KAAK,CAArC,EAAwC,YAAY;MACvD,IAAIC,GAAJ,EAASC,MAAT;MACA,OAAOX,OAAO,CAACY,WAAR,CAAoB,IAApB,EAA0B,UAAUC,EAAV,EAAc;QAC3C,QAAQA,EAAE,CAACC,KAAX;UACI,KAAK,CAAL;YACIJ,GAAG,GAAG,KAAKN,KAAL,CAAWW,GAAX,EAAN;;YACA,IAAIL,GAAG,KAAK,IAAZ,EAAkB;cACd,KAAKL,MAAL,CAAYW,KAAZ,CAAkB,gCAAlB;cACA,OAAO,CAAC;cAAE;cAAH,EAAeN,GAAf,CAAP;YACH;;YACD,OAAO,CAAC;YAAE;YAAH,EAAc,KAAKP,QAAL,CAAcK,SAAd,EAAd,CAAP;;UACJ,KAAK,CAAL;YACIG,MAAM,GAAGE,EAAE,CAACI,IAAH,EAAT;YACA,KAAKb,KAAL,CAAWc,GAAX,CAAeP,MAAf;YACA,KAAKN,MAAL,CAAYW,KAAZ,CAAkB,2BAAlB;YACA,OAAO,CAAC;YAAE;YAAH,EAAeL,MAAf,CAAP;QAZR;MAcH,CAfM,CAAP;IAgBH,CAlBM,CAAP;EAmBH,CApBD;;EAqBA,OAAOZ,cAAP;AACH,CA5BmC,EAApC;;AA6BAF,OAAO,CAACE,cAAR,GAAyBA,cAAzB"},"metadata":{},"sourceType":"script"}