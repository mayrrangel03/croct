{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sdk = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar container_1 = require(\"./container\");\n\nvar constants_1 = require(\"./constants\");\n\nvar schema_1 = require(\"./schema\");\n\nvar error_1 = require(\"./error\");\n\nfunction validateConfiguration(configuration) {\n  if (typeof configuration !== 'object' || configuration === null) {\n    throw new Error('The configuration must be a key-value map.');\n  }\n\n  try {\n    schema_1.sdkConfigurationSchema.validate(configuration);\n  } catch (violation) {\n    throw new Error(\"Invalid configuration: \".concat((0, error_1.formatCause)(violation)));\n  }\n}\n\nvar Sdk =\n/** @class */\nfunction () {\n  function Sdk(container) {\n    this.container = container;\n  }\n\n  Sdk.init = function (configuration) {\n    var e_1, _a;\n\n    var _b, _c, _d, _e;\n\n    validateConfiguration(configuration);\n\n    var _f = configuration.eventMetadata,\n        customMetadata = _f === void 0 ? {} : _f,\n        containerConfiguration = tslib_1.__rest(configuration, [\"eventMetadata\"]);\n\n    var eventMetadata = {\n      sdkVersion: constants_1.VERSION\n    };\n\n    try {\n      for (var _g = tslib_1.__values(Object.keys(customMetadata)), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var metadata = _h.value;\n        eventMetadata[\"custom_\".concat(metadata)] = customMetadata[metadata];\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    var container = new container_1.Container(tslib_1.__assign(tslib_1.__assign({}, containerConfiguration), {\n      evaluationEndpointUrl: (_b = containerConfiguration.evaluationEndpointUrl) !== null && _b !== void 0 ? _b : constants_1.EVALUATION_ENDPOINT_URL,\n      trackerEndpointUrl: (_c = containerConfiguration.trackerEndpointUrl) !== null && _c !== void 0 ? _c : constants_1.TRACKER_ENDPOINT_URL,\n      bootstrapEndpointUrl: (_d = containerConfiguration.bootstrapEndpointUrl) !== null && _d !== void 0 ? _d : constants_1.BOOTSTRAP_ENDPOINT_URL,\n      beaconQueueSize: (_e = containerConfiguration.beaconQueueSize) !== null && _e !== void 0 ? _e : 100,\n      eventMetadata: eventMetadata\n    }));\n    var logger = container.getLogger();\n\n    var _j = container.getConfiguration(),\n        appId = _j.appId,\n        tokenScope = _j.tokenScope;\n\n    logger.debug('\\n\\n' + ' ██████ ██████   ██████   ██████ ████████ \\n' + '██      ██   ██ ██    ██ ██         ██    \\n' + '██      ██████  ██    ██ ██         ██    \\n' + '██      ██   ██ ██    ██ ██         ██    \\n' + ' ██████ ██   ██  ██████   ██████    ██    \\n' + '\\n');\n    logger.info(\"Initializing SDK v\".concat(constants_1.VERSION, \"...\"));\n    logger.debug(\"App ID: \".concat(appId));\n    var context = container.getContext();\n    var tab = context.getTab();\n    var user = context.getUser();\n    logger.debug(\"\".concat(tab.isNew ? 'New' : 'Current', \" tab: \").concat(tab.id));\n    logger.debug(\"Token scope: \".concat(tokenScope));\n    logger.debug(\"Current user: \".concat(user !== null ? user : 'anonymous'));\n    logger.debug(\"Test mode: \".concat(containerConfiguration.test));\n    logger.info('⚡ Croct SDK is ready!');\n    return new Sdk(container);\n  };\n\n  Object.defineProperty(Sdk.prototype, \"appId\", {\n    get: function () {\n      var appId = this.container.getConfiguration().appId;\n      return appId;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Sdk.prototype, \"cidAssigner\", {\n    get: function () {\n      return this.container.getCidAssigner();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Sdk.prototype, \"context\", {\n    get: function () {\n      return this.container.getContext();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Sdk.prototype, \"tracker\", {\n    get: function () {\n      return this.container.getTracker();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Sdk.prototype, \"evaluator\", {\n    get: function () {\n      return this.container.getEvaluator();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Sdk.prototype, \"eventManager\", {\n    get: function () {\n      return this.container.getEventManager();\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Sdk.prototype.getLogger = function () {\n    var _a;\n\n    var namespace = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      namespace[_i] = arguments[_i];\n    }\n\n    return (_a = this.container).getLogger.apply(_a, tslib_1.__spreadArray([], tslib_1.__read(namespace), false));\n  };\n\n  Sdk.prototype.getTabStorage = function (namespace) {\n    var _a;\n\n    var subnamespace = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      subnamespace[_i - 1] = arguments[_i];\n    }\n\n    return (_a = this.container).getTabStorage.apply(_a, tslib_1.__spreadArray([namespace], tslib_1.__read(subnamespace), false));\n  };\n\n  Sdk.prototype.getBrowserStorage = function (namespace) {\n    var _a;\n\n    var subnamespace = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      subnamespace[_i - 1] = arguments[_i];\n    }\n\n    return (_a = this.container).getBrowserStorage.apply(_a, tslib_1.__spreadArray([namespace], tslib_1.__read(subnamespace), false));\n  };\n\n  Sdk.prototype.close = function () {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var logger;\n      return tslib_1.__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (this.closed) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            logger = this.getLogger();\n            logger.debug('Closing SDK...');\n            this.closed = true;\n            return [4\n            /*yield*/\n            , this.container.dispose()];\n\n          case 1:\n            _a.sent();\n\n            logger.info('SDK closed.');\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return Sdk;\n}();\n\nexports.Sdk = Sdk;","map":{"version":3,"names":["Object","defineProperty","exports","value","Sdk","tslib_1","require","container_1","constants_1","schema_1","error_1","validateConfiguration","configuration","Error","sdkConfigurationSchema","validate","violation","concat","formatCause","container","init","e_1","_a","_b","_c","_d","_e","_f","eventMetadata","customMetadata","containerConfiguration","__rest","sdkVersion","VERSION","_g","__values","keys","_h","next","done","metadata","e_1_1","error","return","call","Container","__assign","evaluationEndpointUrl","EVALUATION_ENDPOINT_URL","trackerEndpointUrl","TRACKER_ENDPOINT_URL","bootstrapEndpointUrl","BOOTSTRAP_ENDPOINT_URL","beaconQueueSize","logger","getLogger","_j","getConfiguration","appId","tokenScope","debug","info","context","getContext","tab","getTab","user","getUser","isNew","id","test","prototype","get","enumerable","configurable","getCidAssigner","getTracker","getEvaluator","getEventManager","namespace","_i","arguments","length","apply","__spreadArray","__read","getTabStorage","subnamespace","getBrowserStorage","close","__awaiter","__generator","label","closed","dispose","sent"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/sdk.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sdk = void 0;\nvar tslib_1 = require(\"tslib\");\nvar container_1 = require(\"./container\");\nvar constants_1 = require(\"./constants\");\nvar schema_1 = require(\"./schema\");\nvar error_1 = require(\"./error\");\nfunction validateConfiguration(configuration) {\n    if (typeof configuration !== 'object' || configuration === null) {\n        throw new Error('The configuration must be a key-value map.');\n    }\n    try {\n        schema_1.sdkConfigurationSchema.validate(configuration);\n    }\n    catch (violation) {\n        throw new Error(\"Invalid configuration: \".concat((0, error_1.formatCause)(violation)));\n    }\n}\nvar Sdk = /** @class */ (function () {\n    function Sdk(container) {\n        this.container = container;\n    }\n    Sdk.init = function (configuration) {\n        var e_1, _a;\n        var _b, _c, _d, _e;\n        validateConfiguration(configuration);\n        var _f = configuration.eventMetadata, customMetadata = _f === void 0 ? {} : _f, containerConfiguration = tslib_1.__rest(configuration, [\"eventMetadata\"]);\n        var eventMetadata = {\n            sdkVersion: constants_1.VERSION,\n        };\n        try {\n            for (var _g = tslib_1.__values(Object.keys(customMetadata)), _h = _g.next(); !_h.done; _h = _g.next()) {\n                var metadata = _h.value;\n                eventMetadata[\"custom_\".concat(metadata)] = customMetadata[metadata];\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var container = new container_1.Container(tslib_1.__assign(tslib_1.__assign({}, containerConfiguration), { evaluationEndpointUrl: (_b = containerConfiguration.evaluationEndpointUrl) !== null && _b !== void 0 ? _b : constants_1.EVALUATION_ENDPOINT_URL, trackerEndpointUrl: (_c = containerConfiguration.trackerEndpointUrl) !== null && _c !== void 0 ? _c : constants_1.TRACKER_ENDPOINT_URL, bootstrapEndpointUrl: (_d = containerConfiguration.bootstrapEndpointUrl) !== null && _d !== void 0 ? _d : constants_1.BOOTSTRAP_ENDPOINT_URL, beaconQueueSize: (_e = containerConfiguration.beaconQueueSize) !== null && _e !== void 0 ? _e : 100, eventMetadata: eventMetadata }));\n        var logger = container.getLogger();\n        var _j = container.getConfiguration(), appId = _j.appId, tokenScope = _j.tokenScope;\n        logger.debug('\\n\\n'\n            + ' ██████ ██████   ██████   ██████ ████████ \\n'\n            + '██      ██   ██ ██    ██ ██         ██    \\n'\n            + '██      ██████  ██    ██ ██         ██    \\n'\n            + '██      ██   ██ ██    ██ ██         ██    \\n'\n            + ' ██████ ██   ██  ██████   ██████    ██    \\n'\n            + '\\n');\n        logger.info(\"Initializing SDK v\".concat(constants_1.VERSION, \"...\"));\n        logger.debug(\"App ID: \".concat(appId));\n        var context = container.getContext();\n        var tab = context.getTab();\n        var user = context.getUser();\n        logger.debug(\"\".concat(tab.isNew ? 'New' : 'Current', \" tab: \").concat(tab.id));\n        logger.debug(\"Token scope: \".concat(tokenScope));\n        logger.debug(\"Current user: \".concat(user !== null ? user : 'anonymous'));\n        logger.debug(\"Test mode: \".concat(containerConfiguration.test));\n        logger.info('⚡ Croct SDK is ready!');\n        return new Sdk(container);\n    };\n    Object.defineProperty(Sdk.prototype, \"appId\", {\n        get: function () {\n            var appId = this.container.getConfiguration().appId;\n            return appId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sdk.prototype, \"cidAssigner\", {\n        get: function () {\n            return this.container.getCidAssigner();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sdk.prototype, \"context\", {\n        get: function () {\n            return this.container.getContext();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sdk.prototype, \"tracker\", {\n        get: function () {\n            return this.container.getTracker();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sdk.prototype, \"evaluator\", {\n        get: function () {\n            return this.container.getEvaluator();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sdk.prototype, \"eventManager\", {\n        get: function () {\n            return this.container.getEventManager();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Sdk.prototype.getLogger = function () {\n        var _a;\n        var namespace = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            namespace[_i] = arguments[_i];\n        }\n        return (_a = this.container).getLogger.apply(_a, tslib_1.__spreadArray([], tslib_1.__read(namespace), false));\n    };\n    Sdk.prototype.getTabStorage = function (namespace) {\n        var _a;\n        var subnamespace = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            subnamespace[_i - 1] = arguments[_i];\n        }\n        return (_a = this.container).getTabStorage.apply(_a, tslib_1.__spreadArray([namespace], tslib_1.__read(subnamespace), false));\n    };\n    Sdk.prototype.getBrowserStorage = function (namespace) {\n        var _a;\n        var subnamespace = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            subnamespace[_i - 1] = arguments[_i];\n        }\n        return (_a = this.container).getBrowserStorage.apply(_a, tslib_1.__spreadArray([namespace], tslib_1.__read(subnamespace), false));\n    };\n    Sdk.prototype.close = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var logger;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.closed) {\n                            return [2 /*return*/];\n                        }\n                        logger = this.getLogger();\n                        logger.debug('Closing SDK...');\n                        this.closed = true;\n                        return [4 /*yield*/, this.container.dispose()];\n                    case 1:\n                        _a.sent();\n                        logger.info('SDK closed.');\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Sdk;\n}());\nexports.Sdk = Sdk;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}