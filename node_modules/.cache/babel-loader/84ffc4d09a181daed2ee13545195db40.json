{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ActiveRecord = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar schema_1 = require(\"./schema\");\n\nvar operationSchema = {\n  add: schema_1.addOperation,\n  set: schema_1.setOperation,\n  merge: schema_1.mergeOperation,\n  combine: schema_1.combineOperation,\n  increment: schema_1.incrementOperation,\n  decrement: schema_1.decrementOperation,\n  clear: schema_1.clearOperation,\n  unset: schema_1.unsetOperation,\n  remove: schema_1.removeOperation\n};\n\nvar ActiveRecord =\n/** @class */\nfunction () {\n  function ActiveRecord() {\n    this.operations = [];\n  }\n\n  ActiveRecord.prototype.set = function (propertyOrValue, value) {\n    if (typeof propertyOrValue === 'string') {\n      return this.pushOperation({\n        type: 'set',\n        path: propertyOrValue,\n        value: value\n      });\n    }\n\n    return this.pushOperation({\n      type: 'set',\n      path: '.',\n      value: propertyOrValue\n    });\n  };\n\n  ActiveRecord.prototype.add = function (property, value) {\n    return this.pushOperation({\n      type: 'add',\n      path: property,\n      value: value\n    });\n  };\n\n  ActiveRecord.prototype.combine = function (property, value) {\n    return this.pushOperation({\n      type: 'combine',\n      path: property,\n      value: value\n    });\n  };\n\n  ActiveRecord.prototype.merge = function (propertyOrValue, value) {\n    if (typeof propertyOrValue === 'string') {\n      return this.pushOperation({\n        type: 'merge',\n        path: propertyOrValue,\n        value: value\n      });\n    }\n\n    return this.pushOperation({\n      type: 'merge',\n      path: '.',\n      value: propertyOrValue\n    });\n  };\n\n  ActiveRecord.prototype.increment = function (property, amount) {\n    if (amount === void 0) {\n      amount = 1;\n    }\n\n    return this.pushOperation({\n      type: 'increment',\n      path: property,\n      value: amount\n    });\n  };\n\n  ActiveRecord.prototype.decrement = function (property, amount) {\n    if (amount === void 0) {\n      amount = 1;\n    }\n\n    return this.pushOperation({\n      type: 'decrement',\n      path: property,\n      value: amount\n    });\n  };\n\n  ActiveRecord.prototype.clear = function (property) {\n    return this.pushOperation({\n      type: 'clear',\n      path: property\n    });\n  };\n\n  ActiveRecord.prototype.unset = function (property) {\n    return this.pushOperation({\n      type: 'unset',\n      path: property\n    });\n  };\n\n  ActiveRecord.prototype.remove = function (property, value) {\n    return this.pushOperation({\n      type: 'remove',\n      path: property,\n      value: value\n    });\n  };\n\n  ActiveRecord.prototype.pushOperation = function (operation) {\n    var type = operation.type,\n        data = tslib_1.__rest(operation, [\"type\"]);\n\n    operationSchema[type].validate(data);\n    this.operations.push(operation);\n    return this;\n  };\n\n  ActiveRecord.prototype.reset = function () {\n    this.operations.splice(0);\n    return this;\n  };\n\n  ActiveRecord.prototype.isDirty = function () {\n    return this.operations.length > 0;\n  };\n\n  ActiveRecord.prototype.buildPatch = function () {\n    return {\n      operations: this.operations.slice()\n    };\n  };\n\n  return ActiveRecord;\n}();\n\nexports.ActiveRecord = ActiveRecord;","map":{"version":3,"names":["Object","defineProperty","exports","value","ActiveRecord","tslib_1","require","schema_1","operationSchema","add","addOperation","set","setOperation","merge","mergeOperation","combine","combineOperation","increment","incrementOperation","decrement","decrementOperation","clear","clearOperation","unset","unsetOperation","remove","removeOperation","operations","prototype","propertyOrValue","pushOperation","type","path","property","amount","operation","data","__rest","validate","push","reset","splice","isDirty","length","buildPatch","slice"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/activeRecord.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ActiveRecord = void 0;\nvar tslib_1 = require(\"tslib\");\nvar schema_1 = require(\"./schema\");\nvar operationSchema = {\n    add: schema_1.addOperation,\n    set: schema_1.setOperation,\n    merge: schema_1.mergeOperation,\n    combine: schema_1.combineOperation,\n    increment: schema_1.incrementOperation,\n    decrement: schema_1.decrementOperation,\n    clear: schema_1.clearOperation,\n    unset: schema_1.unsetOperation,\n    remove: schema_1.removeOperation,\n};\nvar ActiveRecord = /** @class */ (function () {\n    function ActiveRecord() {\n        this.operations = [];\n    }\n    ActiveRecord.prototype.set = function (propertyOrValue, value) {\n        if (typeof propertyOrValue === 'string') {\n            return this.pushOperation({\n                type: 'set',\n                path: propertyOrValue,\n                value: value,\n            });\n        }\n        return this.pushOperation({\n            type: 'set',\n            path: '.',\n            value: propertyOrValue,\n        });\n    };\n    ActiveRecord.prototype.add = function (property, value) {\n        return this.pushOperation({\n            type: 'add',\n            path: property,\n            value: value,\n        });\n    };\n    ActiveRecord.prototype.combine = function (property, value) {\n        return this.pushOperation({\n            type: 'combine',\n            path: property,\n            value: value,\n        });\n    };\n    ActiveRecord.prototype.merge = function (propertyOrValue, value) {\n        if (typeof propertyOrValue === 'string') {\n            return this.pushOperation({\n                type: 'merge',\n                path: propertyOrValue,\n                value: value,\n            });\n        }\n        return this.pushOperation({\n            type: 'merge',\n            path: '.',\n            value: propertyOrValue,\n        });\n    };\n    ActiveRecord.prototype.increment = function (property, amount) {\n        if (amount === void 0) { amount = 1; }\n        return this.pushOperation({\n            type: 'increment',\n            path: property,\n            value: amount,\n        });\n    };\n    ActiveRecord.prototype.decrement = function (property, amount) {\n        if (amount === void 0) { amount = 1; }\n        return this.pushOperation({\n            type: 'decrement',\n            path: property,\n            value: amount,\n        });\n    };\n    ActiveRecord.prototype.clear = function (property) {\n        return this.pushOperation({\n            type: 'clear',\n            path: property,\n        });\n    };\n    ActiveRecord.prototype.unset = function (property) {\n        return this.pushOperation({\n            type: 'unset',\n            path: property,\n        });\n    };\n    ActiveRecord.prototype.remove = function (property, value) {\n        return this.pushOperation({\n            type: 'remove',\n            path: property,\n            value: value,\n        });\n    };\n    ActiveRecord.prototype.pushOperation = function (operation) {\n        var type = operation.type, data = tslib_1.__rest(operation, [\"type\"]);\n        operationSchema[type].validate(data);\n        this.operations.push(operation);\n        return this;\n    };\n    ActiveRecord.prototype.reset = function () {\n        this.operations.splice(0);\n        return this;\n    };\n    ActiveRecord.prototype.isDirty = function () {\n        return this.operations.length > 0;\n    };\n    ActiveRecord.prototype.buildPatch = function () {\n        return { operations: this.operations.slice() };\n    };\n    return ActiveRecord;\n}());\nexports.ActiveRecord = ActiveRecord;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}