{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArrayType = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar schema_1 = require(\"./schema\");\n\nvar violation_1 = require(\"./violation\");\n\nvar ArrayType =\n/** @class */\nfunction () {\n  function ArrayType(definition) {\n    if (definition === void 0) {\n      definition = {};\n    }\n\n    var _a, _b;\n\n    this.definition = tslib_1.__assign(tslib_1.__assign({}, definition), {\n      minItems: (_a = definition.minItems) !== null && _a !== void 0 ? _a : -1,\n      maxItems: (_b = definition.maxItems) !== null && _b !== void 0 ? _b : -1\n    });\n  }\n\n  ArrayType.prototype.getTypes = function () {\n    return ['array'];\n  };\n\n  ArrayType.prototype.isValidType = function (value) {\n    return Array.isArray(value);\n  };\n\n  ArrayType.prototype.validate = function (value, path) {\n    if (path === void 0) {\n      path = [];\n    }\n\n    if (!this.isValidType(value)) {\n      throw new schema_1.Violation(\"Expected value of type array at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat((0, violation_1.describe)(value), \".\"), path, {\n        type: 'string'\n      });\n    }\n\n    var _a = this.definition,\n        minItems = _a.minItems,\n        maxItems = _a.maxItems;\n    var length = value.length;\n\n    if (minItems >= 0 && minItems > length) {\n      throw new schema_1.Violation(\"Expected \".concat(minItems === maxItems ? 'exactly' : 'at least', \" \") + \"\".concat(minItems, \" \").concat(minItems === 1 ? 'item' : 'items', \" \") + \"at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat(length, \".\"), path, {\n        limit: minItems\n      });\n    }\n\n    if (maxItems >= 0 && maxItems < length) {\n      throw new schema_1.Violation(\"Expected \".concat(minItems === maxItems ? 'exactly' : 'at most', \" \") + \"\".concat(maxItems, \" \").concat(maxItems === 1 ? 'item' : 'items', \" \") + \"at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat(length, \".\"), path, {\n        limit: maxItems\n      });\n    }\n\n    if (this.definition.items === undefined) {\n      return;\n    }\n\n    for (var index = 0; index < length; index++) {\n      this.definition.items.validate(value[index], path.concat([index.toString()]));\n    }\n  };\n\n  return ArrayType;\n}();\n\nexports.ArrayType = ArrayType;","map":{"version":3,"names":["Object","defineProperty","exports","value","ArrayType","tslib_1","require","schema_1","violation_1","definition","_a","_b","__assign","minItems","maxItems","prototype","getTypes","isValidType","Array","isArray","validate","path","Violation","concat","formatPath","describe","type","length","limit","items","undefined","index","toString"],"sources":["C:/Users/User/croct/node_modules/@croct/sdk/validation/arrayType.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ArrayType = void 0;\nvar tslib_1 = require(\"tslib\");\nvar schema_1 = require(\"./schema\");\nvar violation_1 = require(\"./violation\");\nvar ArrayType = /** @class */ (function () {\n    function ArrayType(definition) {\n        if (definition === void 0) { definition = {}; }\n        var _a, _b;\n        this.definition = tslib_1.__assign(tslib_1.__assign({}, definition), { minItems: (_a = definition.minItems) !== null && _a !== void 0 ? _a : -1, maxItems: (_b = definition.maxItems) !== null && _b !== void 0 ? _b : -1 });\n    }\n    ArrayType.prototype.getTypes = function () {\n        return ['array'];\n    };\n    ArrayType.prototype.isValidType = function (value) {\n        return Array.isArray(value);\n    };\n    ArrayType.prototype.validate = function (value, path) {\n        if (path === void 0) { path = []; }\n        if (!this.isValidType(value)) {\n            throw new schema_1.Violation(\"Expected value of type array at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat((0, violation_1.describe)(value), \".\"), path, { type: 'string' });\n        }\n        var _a = this.definition, minItems = _a.minItems, maxItems = _a.maxItems;\n        var length = value.length;\n        if (minItems >= 0 && minItems > length) {\n            throw new schema_1.Violation(\"Expected \".concat(minItems === maxItems ? 'exactly' : 'at least', \" \")\n                + \"\".concat(minItems, \" \").concat(minItems === 1 ? 'item' : 'items', \" \")\n                + \"at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat(length, \".\"), path, { limit: minItems });\n        }\n        if (maxItems >= 0 && maxItems < length) {\n            throw new schema_1.Violation(\"Expected \".concat(minItems === maxItems ? 'exactly' : 'at most', \" \")\n                + \"\".concat(maxItems, \" \").concat(maxItems === 1 ? 'item' : 'items', \" \")\n                + \"at path '\".concat((0, violation_1.formatPath)(path), \"', actual \").concat(length, \".\"), path, { limit: maxItems });\n        }\n        if (this.definition.items === undefined) {\n            return;\n        }\n        for (var index = 0; index < length; index++) {\n            this.definition.items.validate(value[index], path.concat([index.toString()]));\n        }\n    };\n    return ArrayType;\n}());\nexports.ArrayType = ArrayType;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,SAAR,GAAoB,KAAK,CAAzB;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAIE,WAAW,GAAGF,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIF,SAAS;AAAG;AAAe,YAAY;EACvC,SAASA,SAAT,CAAmBK,UAAnB,EAA+B;IAC3B,IAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;MAAEA,UAAU,GAAG,EAAb;IAAkB;;IAC/C,IAAIC,EAAJ,EAAQC,EAAR;;IACA,KAAKF,UAAL,GAAkBJ,OAAO,CAACO,QAAR,CAAiBP,OAAO,CAACO,QAAR,CAAiB,EAAjB,EAAqBH,UAArB,CAAjB,EAAmD;MAAEI,QAAQ,EAAE,CAACH,EAAE,GAAGD,UAAU,CAACI,QAAjB,MAA+B,IAA/B,IAAuCH,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4D,CAAC,CAAzE;MAA4EI,QAAQ,EAAE,CAACH,EAAE,GAAGF,UAAU,CAACK,QAAjB,MAA+B,IAA/B,IAAuCH,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4D,CAAC;IAAnJ,CAAnD,CAAlB;EACH;;EACDP,SAAS,CAACW,SAAV,CAAoBC,QAApB,GAA+B,YAAY;IACvC,OAAO,CAAC,OAAD,CAAP;EACH,CAFD;;EAGAZ,SAAS,CAACW,SAAV,CAAoBE,WAApB,GAAkC,UAAUd,KAAV,EAAiB;IAC/C,OAAOe,KAAK,CAACC,OAAN,CAAchB,KAAd,CAAP;EACH,CAFD;;EAGAC,SAAS,CAACW,SAAV,CAAoBK,QAApB,GAA+B,UAAUjB,KAAV,EAAiBkB,IAAjB,EAAuB;IAClD,IAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;MAAEA,IAAI,GAAG,EAAP;IAAY;;IACnC,IAAI,CAAC,KAAKJ,WAAL,CAAiBd,KAAjB,CAAL,EAA8B;MAC1B,MAAM,IAAII,QAAQ,CAACe,SAAb,CAAuB,yCAAyCC,MAAzC,CAAgD,CAAC,GAAGf,WAAW,CAACgB,UAAhB,EAA4BH,IAA5B,CAAhD,EAAmF,YAAnF,EAAiGE,MAAjG,CAAwG,CAAC,GAAGf,WAAW,CAACiB,QAAhB,EAA0BtB,KAA1B,CAAxG,EAA0I,GAA1I,CAAvB,EAAuKkB,IAAvK,EAA6K;QAAEK,IAAI,EAAE;MAAR,CAA7K,CAAN;IACH;;IACD,IAAIhB,EAAE,GAAG,KAAKD,UAAd;IAAA,IAA0BI,QAAQ,GAAGH,EAAE,CAACG,QAAxC;IAAA,IAAkDC,QAAQ,GAAGJ,EAAE,CAACI,QAAhE;IACA,IAAIa,MAAM,GAAGxB,KAAK,CAACwB,MAAnB;;IACA,IAAId,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,GAAGc,MAAhC,EAAwC;MACpC,MAAM,IAAIpB,QAAQ,CAACe,SAAb,CAAuB,YAAYC,MAAZ,CAAmBV,QAAQ,KAAKC,QAAb,GAAwB,SAAxB,GAAoC,UAAvD,EAAmE,GAAnE,IACvB,GAAGS,MAAH,CAAUV,QAAV,EAAoB,GAApB,EAAyBU,MAAzB,CAAgCV,QAAQ,KAAK,CAAb,GAAiB,MAAjB,GAA0B,OAA1D,EAAmE,GAAnE,CADuB,GAEvB,YAAYU,MAAZ,CAAmB,CAAC,GAAGf,WAAW,CAACgB,UAAhB,EAA4BH,IAA5B,CAAnB,EAAsD,YAAtD,EAAoEE,MAApE,CAA2EI,MAA3E,EAAmF,GAAnF,CAFA,EAEyFN,IAFzF,EAE+F;QAAEO,KAAK,EAAEf;MAAT,CAF/F,CAAN;IAGH;;IACD,IAAIC,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,GAAGa,MAAhC,EAAwC;MACpC,MAAM,IAAIpB,QAAQ,CAACe,SAAb,CAAuB,YAAYC,MAAZ,CAAmBV,QAAQ,KAAKC,QAAb,GAAwB,SAAxB,GAAoC,SAAvD,EAAkE,GAAlE,IACvB,GAAGS,MAAH,CAAUT,QAAV,EAAoB,GAApB,EAAyBS,MAAzB,CAAgCT,QAAQ,KAAK,CAAb,GAAiB,MAAjB,GAA0B,OAA1D,EAAmE,GAAnE,CADuB,GAEvB,YAAYS,MAAZ,CAAmB,CAAC,GAAGf,WAAW,CAACgB,UAAhB,EAA4BH,IAA5B,CAAnB,EAAsD,YAAtD,EAAoEE,MAApE,CAA2EI,MAA3E,EAAmF,GAAnF,CAFA,EAEyFN,IAFzF,EAE+F;QAAEO,KAAK,EAAEd;MAAT,CAF/F,CAAN;IAGH;;IACD,IAAI,KAAKL,UAAL,CAAgBoB,KAAhB,KAA0BC,SAA9B,EAAyC;MACrC;IACH;;IACD,KAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGJ,MAA5B,EAAoCI,KAAK,EAAzC,EAA6C;MACzC,KAAKtB,UAAL,CAAgBoB,KAAhB,CAAsBT,QAAtB,CAA+BjB,KAAK,CAAC4B,KAAD,CAApC,EAA6CV,IAAI,CAACE,MAAL,CAAY,CAACQ,KAAK,CAACC,QAAN,EAAD,CAAZ,CAA7C;IACH;EACJ,CAvBD;;EAwBA,OAAO5B,SAAP;AACH,CArC8B,EAA/B;;AAsCAF,OAAO,CAACE,SAAR,GAAoBA,SAApB"},"metadata":{},"sourceType":"script"}