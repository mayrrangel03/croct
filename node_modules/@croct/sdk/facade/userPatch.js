"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserPatch = void 0;
var tslib_1 = require("tslib");
var activeRecord_1 = require("../activeRecord");
var UserPatch = /** @class */ (function (_super) {
    tslib_1.__extends(UserPatch, _super);
    function UserPatch(tracker) {
        var _this = _super.call(this) || this;
        _this.tracker = tracker;
        return _this;
    }
    UserPatch.prototype.save = function () {
        if (!this.isDirty()) {
            // Empty patch
            return Promise.resolve({
                type: 'userProfileChanged',
                patch: { operations: [] },
            });
        }
        var promise = this.tracker.track({
            type: 'userProfileChanged',
            patch: this.buildPatch(),
        });
        this.reset();
        return promise;
    };
    return UserPatch;
}(activeRecord_1.ActiveRecord));
exports.UserPatch = UserPatch;
